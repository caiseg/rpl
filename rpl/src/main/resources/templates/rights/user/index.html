<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta content="text/html;charset=UTF-8"/>	
  <meta name="_csrf" th:content="${_csrf.token}"/>
  <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <title>用户管理</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.min.css}"/>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"></link>
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"></link>
  <!-- Theme style -->
  <link rel="stylesheet" th:href="@{/dist/css/AdminLTE.min.css}"></link>
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
 <link rel="stylesheet" th:href="@{/dist/css/skins/_all-skins.min.css}"></link>
 
 <link rel="stylesheet" th:href="@{/common/js/bootstrap/grid/jquery.bootgrid.css}" />
 <!-- jQuery 2.2.3 -->
<script th:src="@{/plugins/jQuery/jquery-2.2.3.min.js}"></script>
 <script th:inline="javascript" type="text/javascript">
 /*<![CDATA[*/
var token = $("meta[name='_csrf']").attr("content");
var header = $("meta[name='_csrf_header']").attr("content");
$(document).ajaxSend(function(e, xhr, options) {
xhr.setRequestHeader(header, token);
});
/*]]>*/
</script>
</head>
<body class="hold-transition skin-blue layout-top-nav">

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-xs-12">
          <div class="box">
            <!-- /.box-header -->
            <div class="box-body"> 
              <table id="grid-data" class="table table-condensed table-hover table-striped">
				    <thead>
				        <tr>
				            <th data-column-id="userCode">账号</th>
				            <th data-column-id="userName" data-order="desc">用户名称</th>
				            <th data-column-id="regTime" data-formatter="dateconverts" >注册时间</th>
				            <th data-column-id="remark" >备注</th>
				             <th data-column-id="commands" data-formatter="commands" data-sortable="false">操作</th>
				        </tr>
				    </thead>
				</table>
            </div>
            <!-- /.box-body -->
          </div>
          </div>
          </div>
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
<!-- ./wrapper -->

<!-- Bootstrap 3.3.6 -->
<script th:src="@{/bootstrap/js/bootstrap.min.js}" type="text/javascript"></script>

<!-- DataTables -->
<script th:src="@{/common/js/bootstrap/grid/jquery.bootgrid.js}" type="text/javascript"></script>
<script th:src="@{/common/js/bootstrap/grid/jquery.bootgrid.fa.js}" type="text/javascript"></script>
<!-- Slimscroll -->
<script th:src="@{/plugins/slimScroll/jquery.slimscroll.min.js}" type="text/javascript"></script>
<!-- AdminLTE App -->
<script th:src="@{/dist/js/app.min.js}"></script>


<script th:inline="javascript" type="text/javascript">

 /*<![CDATA[*/
 
 var format = function(time, format){
    var t = new Date(time);
    var tf = function(i){return (i < 10 ? '0' : '') + i};
    return format.replace(/yyyy|MM|dd|HH|mm|ss/g, function(a){
        switch(a){
            case 'yyyy':
                return tf(t.getFullYear());
                break;
            case 'MM':
                return tf(t.getMonth() + 1);
                break;
            case 'mm':
                return tf(t.getMinutes());
                break;
            case 'dd':
                return tf(t.getDate());
                break;
            case 'HH':
                return tf(t.getHours());
                break;
            case 'ss':
                return tf(t.getSeconds());
                break;
        }
    })
}
 
var grid = $("#grid-data").bootgrid({
    ajax: true,
    rowCount:[20,50,100],
    labels: {
        noResults: "未找到记录！",
        refresh:"刷新",
        search:"查询",
        infos:"当前： {{ctx.start}} - {{ctx.end}} 总共 ：{{ctx.total}} 条"
    },
    post: function ()
    {
        return {
            userCode: ""//传递给java的参数，暂时未使用上
        };
    },
    url: "/rpl/user/userList",
    formatters: {
        "commands": function(column, row)
        {
            return "<button type=\"button\" class=\"btn btn-xs btn-default command-edit\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-pencil\"></span></button> " + 
                "<button type=\"button\" class=\"btn btn-xs btn-default command-delete\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-trash-o\"></span></button>";
        },
        "dateconverts":function(column,row){
        	var regTime = row.regTime;
        	if(!regTime){
        		return "";
        	}
        	return format(regTime, 'yyyy-MM-dd');
        }
    }
}).on("loaded.rs.jquery.bootgrid", function()
{
    /* Executes after data is loaded and rendered */
    grid.find(".command-edit").on("click", function(e)
    {
        alert("You pressed edit on row: " + $(this).data("row-id"));
    }).end().find(".command-delete").on("click", function(e)
    {
        alert("You pressed delete on row: " + $(this).data("row-id"));
    });
});
/*]]>*/
</script>

</body>
</html>